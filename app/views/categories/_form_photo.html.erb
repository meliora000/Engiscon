
<div class="just_background" style = "background-color: rgba(0,0,0,.8); position:fixed; left:0; top:0; width:100%; height:100%; z-index:100; display: none">

</div>
<div class="firstscreen" id="staggered-test">
  <% @post = @posts.first %>
  <% if @post.url.present? %>
      <img src=<%= @post.url %>>
  <% end %>
  <% if @post.avatar.present? %>
      <%= image_tag @post.avatar%>
  <% end %>
</div>


<div class="main_photo" id="staggered-test2">
  <div class="grid">
    <ul>
      <% imgnum = 0 %>
      <% @posts.each do |post| %>
          <li>
            <% if post.url.present? %>
                <img class="img-<%= imgnum+=1 %>" src=<%= post.url %>>
            <% end %>
            <% if post.avatar.present? %>
                <%= image_tag post.avatar, :width=>300, :class=>"img-#{imgnum+=1}" %>
            <% end %>
            <div class = "description">
              <h3><%= post.title %></h3>
              <p><%= post.content %></p>
            </div>
          </li>
          <% imgnum += 1 %>
      <% end %>

      <% @posts.each do |post| %>
          <li>
            <% if post.url.present? %>
              <img src=<%= post.url %>>
            <% end %>
            <% if post.avatar.present? %>
                <%= image_tag post.avatar, :width=>300 %>
            <% end %>
          </li>
      <% end %>

      <% @posts.each do |post| %>
          <li>
            <% if post.url.present? %>
                <img src=<%= post.url %>>
            <% end %>
            <% if post.avatar.present? %>
                <%= image_tag post.avatar, :width=>300 %>
            <% end %>
          </li>
      <% end %>

    </ul>
  </div>


</div>

<script>
  $(document).ready(function(){
    var orw = 0;
    var orh = 0;
    //when want to close
    $(".just_background").click(function(){
      $(".just_background").empty();
      $(".just_background").hide();
    })
    //when img hover
    $("img").mouseenter(function(){
      $(this).addClass('animated swing');
    })
    $("img").mouseleave(function(){

     $("img").removeClass('animated swing');
    })


    //when img click

    $("img").click(function(){
      orw = $(this).width()
      orh = $(this).height()
      tempimg = $(this).clone()
      hvalue = $(window).width()*$(this).height()/$(this).width()/2

      tempimg.css({
        position:"fixed",
        left:0,
        width:$(window).width()/2,
        top:($(window).height() - hvalue)/ 2,
      });
      desc = $(this).parent().find(".description").clone()

      desc.css({
        position:"fixed",
        right:0,
        top:($(window).height() - hvalue)/ 2,
        width:$(window).width()/2,
        display:"block",

      })
      desc.show()

      $(".just_background").append(tempimg)
      $(".just_background").append(desc)
      $(".just_background").find("img").addClass('animated bounceInDown');
      $(".just_background").find(".description").addClass('animated bounceInRight');
      $(".just_background").show();

    })
  }
  )
</script>